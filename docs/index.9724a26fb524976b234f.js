(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===t(o)?o:String(o)),r)}var o}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}const n=i((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.getRandomInteger=function(t,e){return Math.floor(Math.random()*(e-t)+t)}}));function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===r(o)?o:String(o)),n)}var o}var a=new WeakSet;function c(){this.timeNow=Date.now();var t=this.timeNow-this.timeStart,e=Math.floor(t/1e3),i=0;e>=60&&(e-=60*(i=Math.floor(e/60))),i=i<10?"0".concat(i):"".concat(i),e=e<10?"0".concat(e):"".concat(e),this.time="".concat(i,":").concat(e)}const s=function(){function t(e){var i,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,n=a),n.add(i),this.$container=e,this.time="00:00",this.timeStart=Date.now(),this.timeNow=this.timeStart}var e,i;return e=t,(i=[{key:"draw",value:function(){(function(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i})(this,a,c).call(this),this.$container.innerText="Time: ".concat(this.time)}}])&&o(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==h(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===h(r)?r:String(r)),n)}var r}const u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=e,this.balance=0}var e,i;return e=t,(i=[{key:"increase",value:function(t){this.balance+=t,this.draw()}},{key:"draw",value:function(){this.$container.innerText="Score: ".concat(this.balance)}}])&&l(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==f(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===f(r)?r:String(r)),n)}var r}function v(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function m(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var p=new WeakSet,w=new WeakSet,d=new WeakSet;function b(){var t=this;this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.$container.appendChild(this.canvas),m(this,w,g).call(this),window.addEventListener("resize",(function(){m(t,w,g).call(t)})),this.media=window.matchMedia("(prefers-color-scheme: dark)"),m(this,d,S).call(this,this.media),this.media.addEventListener("change",(function(){m(t,d,S).call(t,t.media)}))}function g(){this.canvas.width=0,this.canvas.height=0,this.ratio=this.matrix_height/this.matrix_width,this.canvas.width=this.$container.offsetWidth,this.canvas.height=this.canvas.width*this.ratio,this.cell_width=this.canvas.width/this.matrix_width,this.cell_height=this.canvas.height/this.matrix_height,this.draw()}function S(t){t.matches?(this.color_canvas="#055159",this.color_cells="#0DC4D9"):(this.color_canvas="#F5F5F5",this.color_cells="#0DC4D9"),this.draw()}const E=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,d),v(this,w),v(this,p),this.$container=e,this.matrix_width=i,this.matrix_height=n,this.matrix=this.generateMatrix(this.matrix_width,this.matrix_height),m(this,p,b).call(this),this.draw()}var e,i;return e=t,(i=[{key:"draw",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle=this.color_canvas,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle=this.color_cells;for(var t=0;t<this.matrix_width;t++)for(var e=0;e<this.matrix_height;e++)0!==this.matrix[t][e]&&this.context.fillRect(t*this.cell_width,e*this.cell_height,this.cell_width,this.cell_height)}},{key:"generateMatrix",value:function(t,e){for(var i=new Array,n=0;n<t;n++){i[n]=new Array;for(var r=0;r<e;r++)i[n][r]=0}return i}},{key:"copyMatrix",value:function(t,e){for(var i=0;i<e.length;i++)for(var n=0;n<e[i].length;n++)t[i][n]=e[i][n];return t}},{key:"reflectX",value:function(t){return t.reverse()}},{key:"reflectY",value:function(t){for(var e=this.generateMatrix(t.length,t[0].length),i=0;i<t.length;i++)e[i]=t[i].reverse();return this.copyMatrix(t,e)}},{key:"rotateLeft",value:function(t){for(var e=this.generateMatrix(t[0].length,t.length),i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var r=i;e[t[i].length-1-n][r]=t[i][n]}return this.copyMatrix(t,e)}},{key:"rotateRight",value:function(t){for(var e=this.generateMatrix(t[0].length,t.length),i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var r=n,o=t.length-1-i;e[r][o]=t[i][n]}return this.copyMatrix(t,e)}}])&&y(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function P(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==T(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===T(r)?r:String(r)),n)}var r}function _(t,e,i){return e&&P(t.prototype,e),i&&P(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function k(t,e){!function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,e),e.add(t)}function x(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}var M=new WeakSet,j=new WeakSet,A=new WeakSet,R=new WeakSet,I=new WeakSet,W=new WeakSet,C=new WeakSet,D=new WeakSet,$=new WeakSet;function O(){this.support=new n,this.timer=new s(this.$TIMER),this.score=new u(this.$SCORE),this.map=new E(this.$MAP,this.MATRIX_WIDTH,this.MATRIX_HEIGHT),this.isPaused=!1,this.canMove=!0,this.interval=setInterval(x(this,j,H).bind(this),this.SPEED_RATE)}function H(){x(this,A,K).call(this),x(this,R,L).call(this),x(this,I,X).call(this)}function K(){}function L(){this.timer.draw(),this.score.draw(),this.map.draw()}function X(){}function q(){this.MATRIX_WIDTH=10,this.MATRIX_HEIGHT=24,this.MAP_WIDTH=10,this.MAP_HEIGHT=20,this.SPEED_RATE=50}function z(){this.$MAP=document.querySelector("#map"),this.$SCORE=document.querySelector("#score"),this.$TIMER=document.querySelector("#timer"),this.$RATING=document.querySelector("#rating")}function G(){x(this,$,N).call(this)}function N(){var t=this;window.addEventListener("keydown",(function(e){!0===t.canMove&&("ArrowLeft"===e.code||"KeyA"===e.code||"ArrowUp"===e.code||"KeyW"===e.code||"ArrowRight"===e.code||"KeyD"===e.code||"ArrowDown"===e.code||e.code),"KeyR"===e.code&&(clearInterval(t.interval),x(t,M,O).call(t)),"KeyP"===e.code&&(!0===t.isPaused?(t.interval=setInterval(x(t,j,H).bind(t),t.SPEED_RATE),t.isPaused=!1):(clearInterval(t.interval),t.isPaused=!0))}))}new(_((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,$),k(this,D),k(this,C),k(this,W),k(this,I),k(this,R),k(this,A),k(this,j),k(this,M),x(this,C,z).call(this),x(this,W,q).call(this),x(this,D,G).call(this),x(this,M,O).call(this)})))})();